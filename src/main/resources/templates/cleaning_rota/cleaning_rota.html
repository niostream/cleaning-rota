<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
<title>掃除当番表</title>
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/3.3.7/css/bootstrap.min.css}">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" th:href="@{/webjars/bootstrap/3.3.7/css/bootstrap-theme.min.css}">
<link rel="stylesheet" th:href="@{/css/cleaning_rota.css}">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js" th:src="@{/webjars/jquery/1.11.1/jquery.min.js}"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" th:src="@{/webjars/bootstrap/3.3.7/js/bootstrap.min.js}"></script>
<script th:src="@{/js/cleaning_rota.js}"></script>
</head>
<body>
  <div class="container">
	<h1>掃除当番表</h1>
<!-- 	<p> -->
<!-- 	  <span sec:authentication="principal.user.firstName">姓</span>&nbsp;<span sec:authentication="principal.user.lastname">名</span>さんログイン中。 -->
<!-- 	</p> -->
	<div class="col-sm-12">
	  <div class="form-group">
	  	<div class="col-sm-2">
		  <input type="button" class="btn btn-default btn-xs" value="ボタン切り替え" id="switchButton"/>
	    </div>
	    <div class="col-sm-2 pull-right">
	      <form th:action="@{/logout}" method="post">
	        <input type="submit" class="btn btn-default btn-xs" value="ログアウト" />
	      </form>
	    </div>
<!-- 	    <div class="col-sm-2"> -->
<!-- 	      <form th:action="@{/change_password}" method="get"> -->
<!-- 	        <input type="submit" class="btn btn-default btn-xs" value="パスワード変更" /> -->
<!-- 	      </form> -->
<!-- 	    </div> -->
	  </div>
	</div>
	<hr/>	
	<div class="col-sm-12">
	　　<table class="table table-striped table-bordered table-condensed" style="table-layout: fixed;">
		<tr>
		  <th class="text-center" th:text="日付"></th>
		  <th class="text-center" th:each="item : ${items}" th:text="${item.itemName}"></th>
		</tr>
<!-- 		<tr th:each="cleaningRecord : ${cleaningRecords}"> -->
<!-- 		　　<td th:text="${cleaningRecord.executedDate}">2019/02/16</td> -->
<!-- 		　　<td th:text="${cleaningRecord.item.itemName}">山田</td> -->
<!-- 		　　<td th:text="${cleaningRecord.user.firstName}">太郎</td> -->
<!-- 		　　<td th:text="${cleaningRecord.user.lastName}">duke</td> -->
<!-- 		　　<td> -->
<!-- 			<form th:action="@{/customers/edit}" method="get"> -->
<!-- 			　　<input class="btn btn-default" type="submit" name="form" value="編集" /> -->
<!-- 			　　<input type="hidden" name="id" th:value="${customer.id}" />				 -->
<!-- 			</form> -->
<!-- 		　　</td> -->
<!-- 		　　<td> -->
<!-- 			<form th:action="@{/customers/delete}" method="post"> -->
<!-- 			　　<input class="btn btn-danger" type="submit" value="削除" /> -->
<!-- 			　　<input type="hidden" name="id" th:value="${customer.id}" />				 -->
<!-- 			</form> -->
<!-- 		　　</td> -->
<!-- 		</tr> -->
		
		<tr th:each="ex : ${cleaningRecordMap}">
		  <td class="text-center" th:text="${ex.key}"></td>
		  <td class="text-center" th:each="it : ${ex.value}">
		    <div th:each="cr : ${it.value}">
		  	  <div th:if="${cr} != null">
	            <span class="text-success" th:text="${cr.user.firstName}"></span>
	            <!-- 表示時一時コメント -->
			  	<div th:if="${it.value != null}" class="showButton">
			  	  <form th:action="@{/cleaning_rota/physical_delete}" method="post">
		  	  	    <input class="btn btn-danger btn-sm" type="submit" name="form" value="削除" />
		  	  	    <input type="hidden" name="recordId" th:value="${cr.recordId}" />
			  	  </form>
			  	</div>
			  	<!-- 表示時一時コメント -->
		  	  </div>
		  	</div>
		  	<!-- 表示時一時コメント -->
		  	<div th:if="${it.value == null}" class="showButton">
		  	  <form th:action="@{/cleaning_rota/regist}" method="post">
   	  	        <input class="btn btn-primary btn-sm" type="submit" name="form" value="登録" />
   	  	        <input type="hidden" name="executedDate" th:value="${ex.key}" />
   	  	        <input type="hidden" name="itemId" th:value="${it.key.itemId}" />
		  	  </form>
		  	</div>
		  	<!-- 表示時一時コメント -->
		  </td>
		</tr>
	　　</table>
	  
<!-- 	  <ul th:each="ex : ${cleaningRecordMap}"> -->
<!-- 	  	<li th:text="${ex.key}"></li> -->
<!-- 	  	<li th:each="it : ${ex.value}"> -->
<!-- 	  	  <div th:text="${it.key.itemId}"></div> -->
<!-- 	  	  <div th:each="cr : ${it.value}"> -->
<!-- 	  	    <span th:text="${cr.recordId}"></span> -->
<!-- 	  	    <span th:text="${cr.item.itemName}"></span> -->
<!-- 	  	    <span th:text="${cr.user.firstName}"></span> -->
<!-- 	  	  </div> -->
<!-- 	  	</li> -->
<!-- 	  </ul> -->
	
    </div>
  </div>
  
</body>
</html>